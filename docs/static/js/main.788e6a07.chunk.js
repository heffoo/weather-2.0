(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{10:function(e,t,a){},29:function(e,t,a){e.exports=a(51)},34:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),o=(a(34),a(12)),u=a(3),i=a.n(u),s=a(7),m=a(9),p=a(23),f=a(16),d=a(25),v=a.n(d);a(39);function h(){var e=Object(p.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]);return h=function(){return e},e}var b=Object(f.css)(h());function y(){return r.a.createElement("div",{className:"sweet-loading-show"},r.a.createElement(v.a,{css:b,size:10,color:"#ffffff"}))}var E=function(){return r.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"#888888",d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14z"}))};a(40);function w(e){var t=e.onSubmitCity,a=e.weatherInfo;return r.a.createElement("div",{className:"searchFormWrapper"},r.a.createElement("form",{name:"searchCity",onSubmit:t},r.a.createElement("input",{name:"cityInput",type:"text",className:"searchFormInput",id:"input"}),r.a.createElement("button",{type:"submit",className:"searchFormButton"},r.a.createElement(E,null))),r.a.createElement("p",null,"\u0433\u043e\u0440\u043e\u0434: ",a.dayInfo.city))}var g=a(13),I=a(14),k=a(28),O=a(27),N=function(e){Object(k.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(I.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?(console.log(this.state.error),r.a.createElement("div",null,r.a.createElement("h2",null,"404"))):this.props.children}}]),a}(r.a.Component);a(41);function j(e){return new Date(1e3*e).toLocaleString("ru",{month:"long",day:"numeric"})}a(42);var x=function(e){var t,a=e.dayInfo;return r.a.createElement("div",{className:"main-info"},r.a.createElement("div",null,r.a.createElement("p",{className:"temp"}," ",Math.ceil(a.temperature),"\xb0"),r.a.createElement("p",null,"\u041f\u043e \u043e\u0449\u0443\u0449\u0435\u043d\u0438\u044f\u043c: ",Math.ceil(a.feelsLike)," \xb0")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"clouds"},r.a.createElement("h1",null," ","Clouds"===(t=a.clouds)?"\u041e\u0431\u043b\u0430\u0447\u043d\u043e":"Rain"===t?"\u0414\u043e\u0436\u0434\u044c":"Clear"===t?"\u0421\u043e\u043b\u043d\u0435\u0447\u043d\u043e":"Smoke"===t?"\u0414\u044b\u043c\u043a\u0430":"Mist"===t?"\u0422\u0443\u043c\u0430\u043d":"Drizzle"===t?"\u041c\u043e\u0440\u043e\u0441\u044c":"Snow"===t?"\u0421\u043d\u0435\u0433":t),r.a.createElement("p",null," ",a.description," ")),r.a.createElement("br",null),r.a.createElement("img",{className:"weather-img",alt:"",src:"http://openweathermap.org/img/wn/".concat(a.icon,"@2x.png")}))},C=a(1);a(10);function S(e){var t=e.time;return r.a.createElement(r.a.Fragment,null,t)}function F(e){var t=e.time;return r.a.createElement(r.a.Fragment,null,t)}function D(e){var t=e.icon;return r.a.createElement("div",{className:"weather-pic"},r.a.createElement("img",{alt:"",className:"weather-block-img",src:"http://openweathermap.org/img/wn/".concat(t,"@2x.png")}))}function M(e){var t=e.temp;return r.a.createElement(r.a.Fragment,null,Math.ceil(t),"\xb0")}function B(e){var t=e.date,a=e.temperature,n=e.time,c=e.iconName;return r.a.createElement("div",{className:"day-block"},r.a.createElement("div",null,r.a.createElement("div",{className:"time"},r.a.createElement("p",null,r.a.createElement(S,{time:t})),r.a.createElement("p",{className:"temperature"},r.a.createElement(M,{temp:a})))),n&&r.a.createElement(F,{time:n}),r.a.createElement(D,{icon:c}))}a(43);var P=function(e){var t=e.list,a=void 0===t?[]:t;return r.a.createElement("section",{className:"different-days-block"},r.a.createElement("div",{className:"block-scroll-wrapper"},r.a.createElement("div",{className:"block-scroll"},r.a.createElement(r.a.Fragment,null,a.length&&a.map((function(e,t){return r.a.createElement(B,{key:t,time:"time"in e?e.time:"",iconName:e.iconName,date:e.date,temperature:e.temperature})})),console.log("here")))))},A=function(e){var t=e.dailyInfo,a=e.hourlyInfo;e.setModalIsOpen;return r.a.createElement("div",null,r.a.createElement("div",{className:"btn-wrapper"},r.a.createElement(o.b,{exact:!0,to:"/weather",activeClassName:"active",className:"day-btn"},"\u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement(o.b,{to:"/old",activeClassName:"active",className:"day-btn"},"\u043f\u043e \u0447\u0430\u0441\u0430\u043c")),r.a.createElement(C.d,null,r.a.createElement(N,null,r.a.createElement(C.b,{exact:!0,path:"/weather"},r.a.createElement(P,{list:t})),console.log(t,a),r.a.createElement(C.b,{path:"/old"},r.a.createElement(P,{list:a})),r.a.createElement(C.a,{from:"/",to:"/weather"}))))},z=function(e){var t=e.dayInfo;return r.a.createElement("div",{className:"coords"},"\u0448\u0438\u0440\u043e\u0442\u0430 ",t.lon," ",r.a.createElement("br",null),"\u0434\u043e\u043b\u0433\u043e\u0442\u0430 ",t.lat,r.a.createElement("br",null),"\u0432\u0435\u0442\u0435\u0440 ",t.windSpeed,"\u043c\u0441/c",r.a.createElement("br",null))};function L(e){var t=e.weatherInfo,a=e.onSubmitCity,n=e.loading,c=e.setModalIsOpen;return t.dayInfo||c(!0),r.a.createElement("div",{className:"wrapper"}," ",r.a.createElement(w,{onSubmitCity:a,loading:n,weatherInfo:t})," ",r.a.createElement(x,{dayInfo:t.dayInfo})," ",r.a.createElement("div",{className:"bottomBlock"}," ",r.a.createElement(z,{dayInfo:t.dayInfo})," ",r.a.createElement(A,{dailyInfo:t.dailyInfo,hourlyInfo:t.hourlyInfo,setModalIsOpen:c})," "))}var H=encodeURIComponent,J="5f892c8a0b4c47ee1b455fa5bbc9851f",R=function(){function e(){Object(g.a)(this,e)}return Object(I.a)(e,null,[{key:"buildParams",value:function(e){var t={APPID:J,q:"".concat(e),units:"metric",lang:"ru"};return"?"+Object.keys(t).map((function(e){return H(e)+"="+H(t[e])})).join("&")}},{key:"getForecast",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(404!==(a=e.sent).status){e.next=8;break}return console.log("incorrect city"),e.abrupt("return",a);case 8:a.ok||console.log("unknown error");case 9:return e.next=11,a.json();case 11:return n=e.sent,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDayByCity",value:function(){var t=Object(s.a)(i.a.mark((function t(a){var n,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.buildParams(a),t.next=3,e.getForecast("".concat("https://api.openweathermap.org/data/2.5/weather").concat(n));case 3:if(!1!==(r=t.sent).ok){t.next=6;break}return t.abrupt("return",r);case 6:return c={city:r.name,clouds:r.weather[0].main,lat:r.coord.lat,lon:r.coord.lon,temperature:r.main.temp,feelsLike:r.main.feels_like,windSpeed:r.wind.speed,description:r.weather[0].description,icon:r.weather[0].icon},t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHourlyByCity",value:function(){var t=Object(s.a)(i.a.mark((function t(a){var n,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.buildParams(a),t.next=3,e.getForecast("".concat("https://api.openweathermap.org/data/2.5/forecast").concat(n));case 3:return r=t.sent,c=r.list.map((function(e){return{iconName:e.weather[0].icon,temperature:e.main.temp,date:j(e.dt),time:(t=e.dt,new Date(1e3*t).toLocaleString("ru",{hour:"numeric",minute:"numeric"}))};var t})),t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getDailyByCoords",value:function(){var t=Object(s.a)(i.a.mark((function t(a,n){var r,c,l,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={APPID:J,lat:a,lon:n,units:"metric",exclude:"hourly"},c="?"+Object.keys(r).map((function(e){return H(e)+"="+H(r[e])})).join("&"),t.next=4,e.getForecast("".concat("https://api.openweathermap.org/data/2.5/onecall").concat(c));case 4:return l=t.sent,o=l.daily.map((function(e){return{iconName:e.weather[0].icon,temperature:e.temp.day,date:j(e.dt)}})),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=Object(s.a)(i.a.mark((function t(a){var n,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDayByCity(a);case 2:if(!1!==(n=t.sent).ok){t.next=5;break}return t.abrupt("return",n);case 5:return t.next=7,e.getHourlyByCity(a);case 7:return r=t.sent,t.next=10,e.getDailyByCoords(n.lat,n.lon);case 10:return c=t.sent,t.abrupt("return",{dayInfo:n,hourlyInfo:r,dailyInfo:c});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();a(49),a(50);function q(e){var t=e.isOpen,a=e.setIsOpen,n=e.error;return t?r.a.createElement("div",{className:"modal"},r.a.createElement("p",{className:"errorMessage"},404===n?"\u041e\u0448\u0438\u0431\u043a\u0430 404: \u0413\u043e\u0440\u043e\u0434 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d":"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"),r.a.createElement("button",{className:"exit-modal-button",onClick:function(){return a(!1)}},"\xd7")):""}var U={dayInfo:{},hourlyInfo:{},dailyInfo:{}},W=function(){var e=Object(n.useState)("\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440"),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(m.a)(l,2),u=o[0],p=o[1],f=Object(n.useState)(U),d=Object(m.a)(f,2),v=d[0],h=d[1],b=Object(n.useState)(!1),E=Object(m.a)(b,2),w=E[0],g=E[1],I=Object(n.useState)(),k=Object(m.a)(I,2),O=k[0],N=k[1];return Object(n.useEffect)((function(){Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.getAll(a);case 3:!1===(t=e.sent).ok?(N(t.status),g(!0)):(p(!0),h(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443");case 10:p(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[a]),r.a.createElement("div",{className:"main-container"},u&&r.a.createElement(y,null)||r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{isModalOpen:w,setModalIsOpen:g,weatherInfo:v,loading:u,onSubmitCity:function(e){e.preventDefault();var t=document.forms.searchCity;c(t.elements.cityInput.value),p(!0),t.elements.cityInput.value=""}}),r.a.createElement(q,{error:O,isOpen:w,setIsOpen:g})))};l.a.render(r.a.createElement(o.a,null,r.a.createElement(W,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.788e6a07.chunk.js.map